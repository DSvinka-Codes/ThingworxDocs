---
description: >-
  Тоже самое что таблицы, но с постоянным хранением данных на диске, не
  удаляются при запуске, также называют логами. Является независимой вещью.
---

# Стримы

## Введение

Стримы это по сути тоже самое что таблицы, но они хранят данные на диске а не в оперативной памяти. То есть при перезапуске системы данные не сбросятся.

{% hint style="danger" %}
При работе со стримами будьте осторожны.&#x20;

В [мешапах](../thingworx-web/layout-mashup.md), создавайте переключатели которые отключают запись логов в стримы. Иначе вы можете засорить диск сервера что приведёт к ошибкам Thingworx.

Также вы можете очищать стримы, об этом будет описано ниже.
{% endhint %}

В системе Thingworx стримы являтся вещами, со своим [мешапом](../thingworx-web/layout-mashup.md) который позволяет смотреть данные хранящиеся в стриме.

В стримах как и таблицы можно создавать поля. \
Но стримы имеют основные поля которые нельзя удалить и имеются по умолчанию: `Id`, `Source`, `Timestamp`, `Location`, `Tag`

* Id - Уникальный номер объекта стрима
* Source - Источник сохранения (Например Робот 2)
* Timestamp - Время создания

## Алгоритм создания стримов

1. Cоздаем заголовки с полями через DataShape (например: Integer `x`, Integer `y`)
2. Затем заходим в [меню](../thingworx-web/sozdanie-obektov.md) [`New`](../thingworx-web/sozdanie-obektov.md), выбераем Streams и создаем стрим со шаблоном Stream.
3. Пишем название стриму, указываем необходимый DataShape, нажимаем Save и готово.

## Алгоритм записи данных в стримы

1. Создаем в какой либо вещи, которая должна работать со стримом, Property. \
   (Например Integer `x`, Integer `y`)
2. Для того, чтобы наши переменные передавали значения в стрим, необходимо в вашей вещи [создать сервис ](../thingworx-web/veshi.md#sozdanie-servisa)с любым именем (который вам будет удобен).
3. Код сервиса самим писать не требуется. Просто заходим в меню слева, в разделе Snippets, в подразделе `Stream, Blog, DataTable`. Выбераем `Add Stream Entry`, нажимаем, и код добавления строк со значения в стримы - автоматически добавится в ваш сервис.
4. Заменяем `underfined` в коде на свои Property.
5. При выполнении созданного сервиса, с стрим будет добавляться строка с значениями из Property.

## Алгоритм добавления стримов в Mashup

1. Добавляем в мешап элемент `Grid Advanced`
2. Затем подключаем сервис стрима. Для этогонажимаем на [кнопку добавления сервиса](../thingworx-web/layout-mashup.md#podklyuchenie-servisov-veshei-k-mashup), в Type выбираем Streams, выбираем наш стрим, из него берём сервис `GetStreamEntriesWithData`. При этом включаем галочку `Execute on Load`.
3. После добавления, раскрываем этот сервис, раскрываем `Returned Data` берём `All Data` и [кидаем ](../thingworx-web/layout-mashup.md#podklyuchenie-servisov-k-vidzhetam-mashupa)на `Grid Advanced`.
4. Далее на `GetStreamEntriesWithData` помещаем AutoRefresh.
5. Затем направляем мышку в правый верхний угол Grid Advanced, раскрываем меню и выбираем `Configure Grid Columns`, где можно отключить / включить поля, настроить отображение, поставить названия.
6. Для удаления всех данных можно использоваться сервис `PurgeStreamEntries`. Добавляется также как и `GetStreamEntriesWithData`.
